## å‘ Helix æ·»åŠ æ–°è¯­è¨€

è¦å‘ Helix æ·»åŠ æ–°è¯­è¨€ï¼Œéœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

## è¯­è¨€é…ç½®

1. åœ¨ `languages.toml` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ `[[language]]` æ¡ç›®ï¼Œå¹¶æä¾›è¯¥è¯­è¨€æ‰€éœ€çš„é…ç½®ã€‚æœ‰å…³è¯­è¨€é…ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£çš„ [è¯­è¨€é…ç½®ç« èŠ‚](../languages.md)ã€‚
   å¦‚æœè¦æ·»åŠ æ–°çš„è¯­è¨€æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨åŒä¸€æ–‡ä»¶ä¸­æ‰©å±• `[language-server]` è¡¨ã€‚
2. å¦‚æœæ‚¨æ·»åŠ äº†æ–°è¯­è¨€æˆ–æ›´æ–°äº†ç°æœ‰è¯­è¨€æœåŠ¡å™¨é…ç½®ï¼Œè¿è¡Œå‘½ä»¤ `cargo xtask docgen` æ¥æ›´æ–° [è¯­è¨€æ”¯æŒ](../lang-support.md) æ–‡æ¡£ã€‚

> ğŸ’¡ å¦‚æœæ‚¨æ·»åŠ äº†æ–°çš„è¯­è¨€æœåŠ¡å™¨é…ç½®ï¼Œè¯·ç¡®ä¿åœ¨ [Language Server Wiki](https://github.com/helix-editor/helix/wiki/Language-Server-Configurations) ä¸­æ›´æ–°å®‰è£…è¯´æ˜ã€‚

## è¯­æ³•é…ç½®ï¼ˆGrammar Configurationï¼‰

1. å¦‚æœæ–°è¯­è¨€å·²æœ‰ tree-sitter è¯­æ³•ï¼Œå¯åœ¨ `languages.toml` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ `[[grammar]]` æ¡ç›®ã€‚
2. å¦‚æœæ‚¨åœ¨æœ¬åœ°æµ‹è¯•è¯­æ³•ï¼Œå¯ä»¥ä½¿ç”¨ `source.path` é”®æä¾›è¯­æ³•çš„ç»å¯¹è·¯å¾„ã€‚ä½†åœ¨æäº¤ pull request å‰ï¼Œè¯·ç¡®ä¿åˆ‡æ¢ä¸º `source.git`ã€‚

## Queries

1. è‹¥è¦ä¸ºæ–°è¯­è¨€æä¾›è¯­æ³•é«˜äº®å’Œç¼©è¿›åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ å¯¹åº”çš„ queriesã€‚
2. ä¸ºè¯¥è¯­è¨€åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œè·¯å¾„ä¸º `runtime/queries/<name>/`ã€‚
3. æœ‰å…³ç¼–å†™ queries çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ [tree-sitter å®˜æ–¹æ–‡æ¡£](https://tree-sitter.github.io/tree-sitter/3-syntax-highlighting.html#highlights)ã€‚
4. é«˜äº®æ•è·åˆ—è¡¨å¯ä»¥åœ¨ [ä¸»é¢˜é¡µé¢](https://docs.helix-editor.com/themes.html#scopes) æŸ¥çœ‹ã€‚

## å¸¸è§é—®é¢˜

* å¦‚æœåˆ‡æ¢åˆ†æ”¯åè¿è¡Œ Helix å‡ºç°é”™è¯¯ï¼Œå¯èƒ½éœ€è¦æ›´æ–° tree-sitter è¯­æ³•ã€‚è¿è¡Œ `hx --grammar fetch` è·å–è¯­æ³•ï¼Œå†è¿è¡Œ `hx --grammar build` æ„å»ºä»»ä½•è¿‡æœŸè¯­æ³•ã€‚
* å¦‚æœæŸä¸ªè§£æå™¨å¯¼è‡´æ®µé”™è¯¯ï¼ˆsegfaultï¼‰ï¼Œæˆ–æ‚¨å¸Œæœ›ç§»é™¤å®ƒï¼Œè¯·åˆ é™¤ä½äº `runtime/grammars/<name>.so` çš„ç¼–è¯‘æ–‡ä»¶ã€‚
* å¦‚æœæ‚¨æ·»åŠ äº† queriesï¼Œä½† Helix æ— æ³•æ‰¾åˆ°å®ƒä»¬ï¼Œè¯·ç¡®ä¿ç¯å¢ƒå˜é‡ `HELIX_RUNTIME` è®¾ç½®ä¸ºæ‚¨å¼€å‘çš„ `runtime` æ–‡ä»¶å¤¹è·¯å¾„ã€‚
